!function(a,b,c){function d(a,b){var c,d,e=this;return function(){return d=Array.prototype.slice.call(arguments,0),c=clearTimeout(c,d),c=setTimeout(function(){a.apply(e,d),c=0},b),this}}function e(b){return this.settings=a.extend({},defaults,b),this.counter=0,this.init(),this}a.extend(a.fn,{debounce:function(a,b,c){this.bind(a,d.apply(this,[b,c]))}});var f,g,h,i,j;b._gaq=b._gaq||[],f="gace",defaults={debug:!1,kind:"ga",ua:null,domain:b.location.hostname,sendPageViewOnStart:!0,mobileBrowsers:!1,outboundLinks:!1,socialTracking:[],inactiveTab:!1,scrollEvents:!1,formEvents:!1,mobileBrowsersMode:"customVar",mobileBrowsersCustomVarIndex:1,mobileBrowsersDimensionIndex:1,outboundLinksElements:null,outboundLinksOnlyBlank:!1,outboundLinksTimeout:200,inactiveTabMax:10,inactiveTabMinTime:3,inactiveTabMaxTime:null,socialTrackingKind:"social",socialTrackingTime:!1,fbAppId:"134030676692228"},g=function(){!function(){var a=c.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"===c.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=c.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}()},h=function(){return b.GoogleAnalyticsObject?null:(function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(b,c,"script","//www.google-analytics.com/analytics.js","ga"),void 0)},i=function(){return"undefined"!=typeof b.twttr?null:(b.twttr=function(a,c,d){var e,f,g=a.getElementsByTagName(c)[0];if(!a.getElementById(d))return f=a.createElement(c),f.id=d,f.src="//platform.twitter.com/widgets.js",b.twttrJS=f,g.parentNode.insertBefore(f,g),b.twttr||(e={_e:[],ready:function(a){e._e.push(a)}})}(c,"script","twitter-wjs"),void 0)},j=function(){!function(){var a=c.createElement("script");a.type="text/javascript",a.src=c.location.protocol+"//connect.facebook.net/en_US/all.js",a.async=!0,c.getElementById("fb-root").appendChild(a)}()},e.prototype={init:function(){var a=this;a.counterInterval=setInterval(function(){a.counter+=.2},200),"ga"===a.settings.kind&&h(),a.settings.debug||("ga"===a.settings.kind&&ga("create",a.settings.ua,a.settings.domain),"_gaq"===a.settings.kind&&(_gaq.push(["_setAccount",a.settings.ua]),a.settings.domain&&_gaq.push(["_setDomainName",a.settings.domain]))),a.settings.sendPageViewOnStart&&("ga"===a.settings.kind&&ga("send","pageview"),"_gaq"===a.settings.kind&&_gaq.push(["_trackPageview"])),"_gaq"===a.settings.kind&&g(),a.settings.mobileBrowsers&&a.mobileBrowsers(),a.settings.scrollEvents&&a.scrollEvents(),a.settings.socialTracking&&a.socialTracking(),a.settings.outboundLinks&&a.outboundLinks(),a.settings.inactiveTab&&a.inactiveTab(),a.settings.formEvents&&a.formEvents()},mobileBrowsers:function(){var a,b;if(b=this,a=b._getMobileBrowsers(),!a)return null;if("customVar"===b.settings.mobileBrowsersMode&&"_gaq"===b.settings.kind&&_gaq.push(["_setCustomVar",b.settings.mobileBrowsersCustomVarIndex,"Mobile Browser Kind",a,3]),"event"===b.settings.mobileBrowsersMode&&b._sendEvent("Mobile Browser Kind","view",a,null),"dimension"===b.settings.mobileBrowsersMode){if("ga"!==b.settings.king)return console.log("Warning: you're using Dimension fwith the old ga.js tracker. Please use customVar instead for Mobile Browser Kind tracking"),null;ga("set","dimension"+b.settings.mobileBrowsersDimensionIndex,a)}},scrollEvents:function(){var d,e,f,g;e=this,e.scrollEventsElements={},e.scrollEventsRecord={},f=a(b).height(),d=a("[data-gace-bloc]"),d.each(function(b,c){var d,f,g,h;d=a(c),f=d.attr("data-gace-bloc"),h=parseInt(d.attr("data-gace-view"),10),h=h||100,e.scrollEventsRecord[f]={},e.scrollEventsElements[f]={},g=e.scrollEventsElements[f],g.height=d.height(),g.offset=d.offset().top,g.bottom=g.height+g.offset,g.time=parseInt(d.attr("data-gace-time"),10)||1,g.percent=h});var h=function(){g=a(c).scrollTop()};h(),a(b).debounce("scroll",h,200)},socialTracking:function(){var d,e;d=this,e=function(a,b,c){"social"===d.settings.socialTrackingKind&&d._sendSocial(a,b,c),"event"===d.settings.socialTrackingKind&&d._sendEvent("Sharing on "+a,b,c)},a.each(d.settings.socialTracking,function(f,g){"Twitter"===g&&a(".twitter-share-button").length&&(i(),twttr.ready(function(){twttr.events.bind("tweet",function(a){return a?(e("Twitter","Tweet",c.location.href),void 0):null})})),"Facebook"===g&&a(".fb-like,.fb-send").length&&(b.fbAsyncInit=function(){FB.init({appId:d.settings.fbAppId,status:!0,cookie:!0});try{FB&&FB.Event&&FB.Event.subscribe&&(FB.Event.subscribe("edge.create",function(a){a.indexOf("facebook.com")>0?e("Facebook","Like",a):e("Facebook","Share",a)}),FB.Event.subscribe("edge.remove",function(a){e("Facebook","Unlike",a)}),FB.Event.subscribe("message.send",function(a){e("Facebook","Send",a)}))}catch(a){}},j())})},outboundLinks:function(){var b,d,e;d=this,b=null!==d.settings.outboundLinksElements?d.settings.outboundLinksElements:a("a").filter(function(){return this.hostname&&this.hostname!==c.location.hostname}),e=a("[data-gace-link]"),b=b.add(e);var f=function(b){var c,e,f,g,h;if(c=a(this),e=c.attr("target"),f=c.attr("href"),h=c.attr("data-gace-link"),(b.metaKey||b.ctrlKey||"_blank"===e)&&(g=!0),"ga"===d.settings.kind,h){var i,j,k,l;i=h.split(","),j=i[0],k=i[1],l=i[2],d._sendEvent(j,k,l)}else d._sendEvent("Outbound Links",this.hostname,f);g||d.settings.outboundLinksOnlyBlank||(b.preventDefault(),setTimeout("document.location.href = '"+f+"';",d.settings.outboundLinksTimeout))};b.on("click",f)},inactiveTab:function(){var c;c=this,inactiveTabInterval=0,c.isActive=!0,c.inactiveTabCounter=0,c.inactiveTabCount=0;var d=function(){return c.inactiveTabCount>=c.settings.inactiveTabMax?null:(inactiveTabInterval=setInterval(function(){c.inactiveTabCounter=c.inactiveTabCounter+.2},200),c.isActive=!1,void 0)},e=function(){if(c.isActive)return null;var a;a=!0,clearInterval(inactiveTabInterval),c.inactiveTabCounter<=c.settings.inactiveTabMinTime&&(a=!1),c.settings.inactiveTabMaxTime&&c.inactiveTabCounter>=c.settings.inactiveTabMaxTime&&(a=!1),a&&c._sendEvent("Activity","inactive","tab",Math.round(c.inactiveTabCounter),{opt_noninteraction:!0}),c.inactiveTabCount+=1,c.inactiveTabCounter=0,c.isActive=!0};a(b).blur(d),a(b).focus(e)},formEvents:function(){var b,c;b=this,c=a(" [data-gace-submit] "),c.each(function(c,d){var e,f,g,h;e=a(d),f=e.parents(" form ").first(),h=f[0].id||"form",g=a.isFunction(f.validationEngine)?function(a){a.preventDefault();var c=f.validationEngine("validate");c?(b._sendEvent("Form","valid",h),setTimeout(function(){f.submit()},500)):b._sendEvent("Form","not valid",h)}:function(a){a.preventDefault(),b._sendEvent("Form","valid",h),setTimeout(function(){f.submit()},500)},e.click(g)})},event:function(a){return self._sendEvent(a[0],a[1],a[2],a[3],a[4])},_getMobileBrowsers:function(){var a=b.navigator.standalone,c=b.navigator.userAgent.toLowerCase(),d=/safari/.test(c),e=/crios/.test(c),f=/iphone|ipod|ipad/.test(c);if(f){if(!a&&d)return"iOS Safari";if(a&&!d)return"iOS standalone";if(!a&&!d)return"iOS UIWebView";if(e&&!d)return"iOS Chrome"}return null},_sendSocial:function(a,b,c){var d,e,f;f=this,"ga"===f.settings.kind?(d={hitType:"social"},f.settings.socialTrackingTime&&(b=b+" ("+Math.round(f.counter)+" sec)"),d.socialNetwork=a,d.socialAction=b,d.socialTarget=c,f.settings.debug?(console.log("GACE: social ga()"),console.log(d)):ga("send",d)):(e=["_trackSocial",a,b,c],f.settings.socialTrackingTime&&e.push("("+Math.round(f.counter)+" sec)"),f.settings.debug?(console.log("GACE: social _gaq"),console.log(e)):_gaq.push(e))},_sendEvent:function(a,b,c,d,e){var f,g,h;h=this,"undefined"==typeof d&&(d=Math.round(h.counter)),"ga"===h.settings.kind?(f={hitType:"event"},f.eventCategory=a,f.eventAction=b,f.eventLabel=c,f.eventValue=d,e&&e.opt_noninteraction&&(f.nonInteraction=e.opt_noninteraction),e&&e.hitCallback&&(f.hitCallback=e.hitCallback),h.settings.debug?(console.log("GACE: event ga()"),console.log(f)):ga("send",f)):(g=["_trackEvent",a,b],g.push(c),g.push(d),e&&e.opt_noninteraction&&g.push(e.opt_noninteraction),h.settings.debug?(console.log("GACE: event _gaq"),console.log(g)):_gaq.push(g))}},a[f]=function(b){a[f]._instance||(a[f]._instance=new e(b))}}(jQuery,window,document);